Time resolution is 1 ps
=====================================
BISR Weight Allocation Testbench
SYSTOLIC_SIZE = 4
=====================================

=== Test Pattern Setup ===
Weight Matrix:
  Row 0: PE[3]=0, PE[2]=22, PE[1]=0, PE[0]=42
  Row 1: PE[3]=13, PE[2]=23, PE[1]=0, PE[0]=43
  Row 2: PE[3]=14, PE[2]=24, PE[1]=34, PE[0]=44
  Row 3: PE[3]=15, PE[2]=0, PE[1]=35, PE[0]=45

Faulty Information:
Faulty Patterns Flat: 1010000000100100
  Row 0 Pattern: 0100 (PE[3]=0, PE[2]=1, PE[1]=0, PE[0]=0)
  Row 1 Pattern: 0010 (PE[3]=0, PE[2]=0, PE[1]=1, PE[0]=0)
  Row 2 Pattern: 0000 (PE[3]=0, PE[2]=0, PE[1]=0, PE[0]=0)
  Row 3 Pattern: 1010 (PE[3]=1, PE[2]=0, PE[1]=1, PE[0]=0)

=== Phase 1: eNVM Initialization ===
eNVM initialization completed

=== Phase 2: Weight Allocation ===

Input Row 0 weights: PE[3]=0, PE[2]=22, PE[1]=0, PE[0]=42
  Zero weight positions: PE[3]=1, PE[2]=0, PE[1]=1, PE[0]=0
  -> Match Success! Faulty Row 3 mapped to current Row 0

Input Row 1 weights: PE[3]=13, PE[2]=23, PE[1]=0, PE[0]=43
  Zero weight positions: PE[3]=0, PE[2]=0, PE[1]=1, PE[0]=0
  -> Match Success! Faulty Row 1 mapped to current Row 1

Input Row 2 weights: PE[3]=14, PE[2]=24, PE[1]=34, PE[0]=44
  Zero weight positions: PE[3]=0, PE[2]=0, PE[1]=0, PE[0]=0
  -> Match Failed, execute step 4 allocation to healthy row

Input Row 3 weights: PE[3]=15, PE[2]=0, PE[1]=35, PE[0]=45
  Zero weight positions: PE[3]=0, PE[2]=1, PE[1]=0, PE[0]=0
  -> Match Success! Faulty Row 0 mapped to current Row 3

Weight allocation phase completed:
  recovery_done = 1
  recovery_success = 1

--- Internal Status ---
Faulty PE Storage valid bits: 0000
All faulty matched: 1

=== Phase 3: Read Test ===
Address mapping results:
  Logic Addr 0 -> Physical Addr 3, Weights: PE[3]=15, PE[2]=0, PE[1]=35, PE[0]=45
  Logic Addr 1 -> Physical Addr 1, Weights: PE[3]=13, PE[2]=23, PE[1]=0, PE[0]=43
  Logic Addr 2 -> Physical Addr 2, Weights: PE[3]=14, PE[2]=24, PE[1]=34, PE[0]=44
  Logic Addr 3 -> Physical Addr 0, Weights: PE[3]=0, PE[2]=22, PE[1]=0, PE[0]=42

=== Final Results ===
PASS: Weight allocation successful, all faulty PEs recovered
Final Status: recovery_done=1, recovery_success=1

=====================================
Test Completed
=====================================
$finish called at time : 155 ns : File "C:/Project/STRAIT/tb_bisr_weight_allocation.v" Line 134
